var storageFlag=function(){if("object"===typeof window.localStorage)try{return localStorage.setItem("localStorageTest",1),localStorage.removeItem("localStorageTest"),!0}catch(a){return!1}else return!1}();
function getStorage(a,c){if($.trim(a)){var b="";if(storageFlag&&(!c||"cookie"!=c)){if(0<localStorage.length)for(var d=0;d<localStorage.length;d++)localStorage.getItem(a)&&(b=decodeURIComponent(localStorage.getItem(a)));return b}b=document.cookie.match(RegExp("(^| )"+a+"=([^;]*)(;|$)"));if(null!=b)return unescape(b[2])}return""}
function setStorage(a,c,b){$.trim(a)&&(!storageFlag||b&&"cookie"==b?(b=a+"="+escape(c),days="undefined"==typeof days||0==days?3650:days,a=new Date,a.setTime(a.getTime()+864E5*days),b=b+";domain=.dangdang.com;path=/;expires="+a.toGMTString(),document.cookie=b):localStorage.setItem(a,encodeURIComponent(c)))}
function delStorage(a,c){if($.trim(a))if(!storageFlag||c&&"cookie"==c){var b=new Date,d=getStorage(a);b.setTime(b.getTime()-1);null!=d&&(document.cookie=a+"="+d+";domain=.dangdang.com;path=/;expires="+b.toGMTString())}else 0<localStorage.length&&""!=a&&localStorage.removeItem(localStorage.key(a))}
function clearStorage(a){if(!storageFlag||a&&"cookie"==a){if(a=document.cookie.match(/[^ =;]+(?=\=)/g))for(var c=a.length-1;0<=c;c--){var b=new Date,d=getStorage(a[c]);b.setTime(b.getTime()-1);document.cookie=a[c]+"="+d+";domain=.dangdang.com;path=/;expires="+b.toGMTString()}}else localStorage.clear()}
var pop={wrap:null,mask:null,text:"",complete:null,determine:null,ok:null,cancel:null,determine_name:"",ok_name:"",cancel_name:"",speed:0,type:"",popup:function(a){if(!a.text)return!1;this.wrap=a.wrap?$(a.wrap):$(".popup");this.mask=a.mask?$(a.mask):$(".mask");this.title=a.title?a.title:"\u6e29\u99a8\u63d0\u793a";this.text=a.text;this.complete="function"===typeof a.complete?a.complete:null;this.determine="function"===typeof a.determine?a.determine:null;this.ok="function"===typeof a.ok?a.ok:null;this.cancel=
"function"===typeof a.cancel?a.cancel:null;this.determine_name=a.determine_name?a.determine_name:"\u786e\u5b9a";this.ok_name=a.ok_name?a.ok_name:"\u786e\u5b9a";this.cancel_name=a.cancel_name?a.cancel_name:"\u53d6\u6d88";this.speed="number"===typeof a.speed&&0<typeof a.speed?a.speed:2E3;if(a.type)switch(a.type.toLowerCase()){case "pop":this.type="Pop";break;case "confirm":this.type="Confirm";break;default:this.type="Alert"}else this.type="Alert";this.mask.css("display","none");this.wrap.css("display",
"none");this.wrap.removeClass("Pop Alert Confirm");this.wrap.find(".title").html(this.title);this.wrap.addClass(this.type).find(".info").html(this.text);this.wrap.find(".title").css("display","none");this.wrap.find(".determine").html(this.determine_name).off("click").css("display","none");this.wrap.find(".ok").html(this.ok_name).off("click").css("display","none");this.wrap.find(".cancel").html(this.ok_name).off("click").css("display","none");"Pop"===this.type?this.openPop():"Confirm"===this.type?
this.openConfirm():this.openAlert();this.wrap.css({width:window.innerWidth+"px",height:window.innerHeight+"px",display:"block"})},openPop:function(){var a=this;setTimeout(function(){a.wrap.css("display","none");a.complete&&a.complete()},a.speed)},openConfirm:function(){var a=this;a.mask.css("display","block");a.mask.css("display","block");a.wrap.find(".ok").css("display","block");a.wrap.find(".cancel").css("display","block");a.wrap.find(".ok").on("click",function(){a.mask.css("display","none");a.wrap.css("display",
"none");a.ok&&a.ok();a.complete&&a.complete()});a.wrap.find(".cancel").on("click",function(){a.mask.css("display","none");a.wrap.css("display","none");a.cancel&&a.cancel();a.complete&&a.complete()})},openAlert:function(){var a=this;a.mask.css("display","block");a.wrap.find(".title").css("display","block");a.wrap.find(".determine").css("display","block");a.wrap.find(".determine").on("click",function(){a.mask.css("display","none");a.wrap.css("display","none");a.determine&&a.determine();a.complete&&
a.complete()})}};
