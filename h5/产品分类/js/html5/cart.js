var spiner=createSpinner();var background=document.getElementById("background");var spinerShow=function(){background.style.height=document.getElementById("m").scrollHeight+20+"px";background.style.display="block";spiner.spin(background)};var spinerHide=function(){background.style.display="none";spiner.stop()};var addCartWare=function(b,f,a,i,c,d,j,e){var g="add.action@wareId="+b+"&num="+f+(!isBlank(d)&&d?"&isAjax="+d:"");g=appendSuit(g,a,i,c,j,e);spinerShow();if(!isBlank(d)&&d){var h=ajax(g,callbackReDrawUI);if(!isBlank(h)&&!h){location.href=g}}else{location.href=g}};var increaseWare=function(b,e,a,i,c,j,d){var g;if((!isBlank(a)&&a!=4)){g=$("#num"+i).val()}else{g=$("#num"+b).val()}if(!/^\d+$/.test(g)){alert("\u5546\u54c1\u6570\u91cf\u4fee\u6539\u5931\u8d25");return}if(Number(g)+1>1000){return}if(!isBlank(d)&&Number(d)+1>Number(g)){alert("\u5ef6\u4fdd\u6570\u91cf\u8d85\u51fa\u6700\u5927\u9650\u5236");return}$("#numerror"+b).text("");if(isBlank(d)){if((!isBlank(a)&&a!=4)){$("#num"+i).val(Number(g)+1)}else{$("#num"+b).val(Number(g)+1)}}else{$("#num"+j).val(Number($("#num"+j).val())+1);d=$("#num"+j).val()}if(isBlank(e)||(!isBlank(a)&&a==4)){e=$("#num"+b).val()}else{c=$("#num"+i).val()}var f="modify.action@wareId="+b+"&num="+e;f=appendSuit(f,a,i,c,j,d);spinerShow();var h=ajax(f,callbackReDrawUI,b);if(!isBlank(h)&&!h){location.href=f}};var decreaseWare=function(b,e,a,i,c,j,d){var g;if((!isBlank(a)&&a!=4)){g=$("#num"+i).val()}else{g=$("#num"+b).val()}if(!/^\d+$/.test(g)){alert("\u5546\u54c1\u6570\u91cf\u4fee\u6539\u5931\u8d25");return}if(Number(g)-1<1){return}$("#numerror"+b).text("");if(isBlank(d)){if((!isBlank(a)&&a!=4)){$("#num"+i).val(Number($("#num"+i).val())-1)}else{$("#num"+b).val(Number($("#num"+b).val())-1)}}else{$("#num"+j).val(Number($("#num"+j).val())-1);d=$("#num"+j).val()}if(isBlank(e)||(!isBlank(a)&&a==4)){e=$("#num"+b).val()}else{c=$("#num"+i).val()}var f="modify.action@wareId="+b+"&num="+e;f=appendSuit(f,a,i,c,j,d);spinerShow();var h=ajax(f,callbackReDrawUI,b);if(!isBlank(h)&&!h){location.href=f}};var modifyWare=function(b,e,a,i,c,j,d){var g;if((!isBlank(a)&&a!=4)){g=$("#num"+i).val()}else{g=$("#num"+b).val()}if(!/^\d+$/.test(g)){alert("\u5546\u54c1\u6570\u91cf\u4fee\u6539\u5931\u8d25");return}if(Number(g)>1000){alert("\u5546\u54c1\u6570\u91cf\u4fee\u6539\u5931\u8d25");if((!isBlank(a)&&a!=4)){$("#num"+i).val(1000)}else{$("#num"+b).val(1000)}}if(Number(g)<1){alert("\u5546\u54c1\u6570\u91cf\u4fee\u6539\u5931\u8d25");$("#num"+b).val(1);if((!isBlank(a)&&a!=4)){$("#num"+i).val(1000)}else{$("#num"+b).val(1)}}$("#numerror"+b).text("");if(isBlank(e)||(!isBlank(a)&&a==4)){e=$("#num"+b).val()}else{c=$("#num"+i).val()}var f="modify.action@wareId="+b+"&num="+e;f=appendSuit(f,a,i,c,j,d);spinerShow();var h=ajax(f,callbackReDrawUI,b);if(!isBlank(h)&&!h){location.href=f}};var deleteWare=function(h,c,g,b,e,d){if(confirm("\u786e\u5b9a\u5220\u9664\u5417\uff1f")){var a="remove.action@wareId="+h+"&num="+c;a=appendSuit(a,g,b,e,d);spinerShow();var f=ajax(a,callbackReDrawUI,h);if(!isBlank(f)&&!f){location.href=a}}};var showChooseGifts=function(c,b,e,a,g,i){var d=function(j){callbackReDrawUI(j,b);document.getElementById("background").style.display="block";document.getElementById("chooseGifts"+b).style.display="block"};if(c=="0"){var f="check.action@wareId="+b+"&num="+$("#num"+b).val()+"&checked=5";f=appendSuit(f,a,g,i);spinerShow();var h=ajax(f,d);if(!isBlank(h)&&!h){location.href=f}}else{document.getElementById("background").style.display="block";document.getElementById("chooseGifts"+b).style.display="block"}$("#checkbox"+b).attr("checked",true)};var hideChooseGifts=function(a){document.getElementById("background").style.display="none";document.getElementById("chooseGifts"+a).style.display="none"};var showChooseYanBao=function(a){document.getElementById("background").style.display="block";document.getElementById("chooseYanBao"+a).style.display="block"};var hideChooseYanBao=function(a){document.getElementById("background").style.display="none";document.getElementById("chooseYanBao"+a).style.display="none"};var addGifts=function(d,c,e,b,a){hideChooseGifts(d);addCartWare(d,c,e,b,a,true)};var deleteGifts=function(d,c,e,b,a){deleteWare(d,c,e,b,a,true)};var addYanBao=function(e,d,f,b,a,c){hideChooseYanBao(e);addCartWare(e,d,f,b,a,true,c)};var deleteYanBao=function(b,d,a,f,h,i,c){if(confirm("\u786e\u5b9a\u5220\u9664\u5417\uff1f")){var e="removeYB.action@wareId="+b+"&num="+d;e=appendSuit(e,a,f,h,i,c);spinerShow();var g=ajax(e,callbackReDrawUI);if(!isBlank(g)&&!g){location.href=e}}};var changeSelected=function(b,d,c,a,f,i){var g=5;if(!c.checked){g=6}var e="check.action@wareId="+b+"&num="+$("#num"+b).val()+"&checked="+g;e=appendSuit(e,a,f,i);spinerShow();var h=ajax(e,callbackReDrawUI,b);if(!isBlank(h)&&!h){location.href=e}};var callBackReDrawSelectUI=function(j,h){try{if(!isBlank(j)){j=JSON.parse(j).cart;var a=j.Price-j.Discount;var f=a-j.RePrice;document.getElementById("cart_oriPrice").innerHTML=a.toFixed(2);document.getElementById("cart_rePrice").innerHTML=j.RePrice.toFixed(2);document.getElementById("cart_realPrice").innerHTML=f.toFixed(2);var g=j.Suits;for(var b=0;b<g.length;b++){var c=g[b];if(c.Id==h){if(!!c.STip){document.getElementById("sTip"+h).innerHTML=c.STip}}}judgeSubmit(f)}}catch(d){}spinerHide()};var callbackReDrawUI=function(c,b){try{if(!isBlank(c)){document.getElementById("m").innerHTML=c;if(!isBlank(b)){location.hash="#product"+b}}}catch(a){}spinerHide();judgeSubmit(document.getElementById("cart_realPrice").innerHTML)};var disableSubmit=function(){document.getElementById("submit").style.background="-webkit-gradient(linear,left top,left bottom,from(#999),to(#CCC))";document.getElementById("submit1").style.background="-webkit-gradient(linear,left top,left bottom,from(#999),to(#CCC))"};var enableSubmit=function(){document.getElementById("submit").style.background="-webkit-gradient(linear,left top,left bottom,from(#ED3131),to(#990A0A))";document.getElementById("submit1").style.background="-webkit-gradient(linear,left top,left bottom,from(#ED3131),to(#990A0A))"};var judgeSubmit=function(a){if(Number(a)<=0){disableSubmit();$("#checkAll").removeClass("on")}else{enableSubmit()}};var appendSuit=function(e,f,b,d,c,a){if(!isBlank(e)){if(!isBlank(f)){e+="&sType="+f}if(!isBlank(b)){e+="&suitSkuId="+b}if(!isBlank(d)){e+="&suitSkuNum="+d}if(!isBlank(c)){e+="&ybId="+c}if(!isBlank(a)){e+="&ybNum="+a}}return e};var submit=function(){var a=document.getElementById("cart_realPrice").innerHTML;if(Number(a)<=0){return}if(Number($("#cartNum").val())>50){alert("\u5546\u54c1\u79cd\u7c7b\u4e0d\u80fd\u5927\u4e8e 50 \u79cd");return}location.href="../order/order.action@enterOrder=true"};var isBlank=function(a){if(a==undefined||a==null||a.length==0){return true}else{return false}};var deSelectedAll=function(c){spinerShow();var a="check.action@checked="+8;var b=ajax(a,c)};var selectedAll=function(c){spinerShow();var a="check.action@checked="+7;var b=ajax(a,c)};var checkAllHandler=function(){if($("#checkAll").hasClass("on")){$("#checkAll").removeClass("on");deSelectedAll(callbackReDrawUI)}else{$("#checkAll").addClass("on");selectedAll(callbackReDrawUI)}};